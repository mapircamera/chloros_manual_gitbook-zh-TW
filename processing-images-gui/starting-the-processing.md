# 启动处理流程

完成图像导入、标记校准目标及项目设置后，即可开始处理。本页面将引导您启动Chloros处理流程。

## 预处理检查清单

点击开始按钮前，请确认以下事项已准备就绪：

* [ ] **文件已导入** - 所有图像均显示在文件浏览器中
* [ ] **标记目标图像** - 校准图像的&quot;目标&quot;列已勾选
* [ ] **相机型号检测** - 相机型号列显示正确设备
* [ ] **设置配置** - 已审核并调整项目设置
* [ ] **指数选择** - 已添加所需多光谱指数（如需）
* [ ] **导出格式选择** - 输出格式符合您的工作流程

{% 提示 style=&quot;info&quot; %}
**提示**：处理前请在文件浏览器中点击查看若干图像，确认其加载无误。
{% endhint %}

***

## 启动处理流程

### 定位开始按钮

开始/播放按钮位于Chloros顶部标题栏：

* 位置：窗口顶部中央
* 图标：**播放/开始按钮** <img src="../.gitbook/assets/image (2) (1).png" alt="" data-size="line">
* 状态：处理就绪时按钮启用（亮色）

### 点击启动

1. 点击顶部标题栏的**播放/开始按钮**

2. 处理立即启动
3. 处理期间按钮失效（变灰）
4. 进度条实时更新处理状态

{%提示 style=&quot;success&quot; %}
**处理已启动**：点击后，Chloros将自动执行全部处理步骤——目标检测、去拜耳化、校准、索引计算及导出。
{% endhint %}

***

## 处理模式解析

Chloros根据许可证类型提供两种处理模式：

### 免费模式（顺序处理）

**所有用户可用**

**工作原理：**

* 逐帧顺序处理图像
* 单线程操作
* 内存占用较低

**进度条显示两个阶段：**

1.**目标检测** - 扫描校准目标
2. **处理** - 应用校准并导出图像**处理时间：**

* 远慢于Chloros+并行模式
* 适用于中小型数据集（&lt;200张图像）

### Chloros+模式（并行处理）

**需Chloros+许可证**

**工作原理：**

* 同时处理多张图像
* 多线程操作（最多16个并行工作进程）
* 充分利用多核CPU
* 可选配NVIDIA显卡实现GPU（CUDA）加速

**进度条显示4个阶段：**

1.**检测** - 定位校准目标
2. **分析阶段** - 检测图像元数据并准备处理流程
3. **校准阶段** - 执行修正与校准操作
4. **导出阶段** - 保存处理后的图像及索引文件**进度条交互功能：*** **悬停鼠标** 可展开四阶段详细下拉面板
* **点击进度条** 可固定下拉面板位置
* **再次点击** 取消冻结并隐藏面板**处理时长：**

* 显著快于自由模式
* 随CPU核心数线性提升
* GPU加速可进一步提升速度

{% 提示 style=&quot;info&quot; %}
**Chloros+ 速度**：处理大型数据集时，并行处理速度可达顺序模式的5-10倍。免费模式下耗时2小时的500张图像项目，使用Chloros+仅需15-20分钟即可完成。
{% endhint %}

***

## 处理流程解析

### 第一阶段：目标检测

**Chloros 执行操作：**

* 扫描标记目标图像（若无标记则扫描全部图像）
* 识别每个目标中的4个校准面板
* 从目标面板提取反射率值
* 记录目标时间戳以安排校准任务

**耗时：** 1-30秒（带标记目标），5-30+分钟（无标记目标）

### 第二阶段：去拜耳化（RAW转换）

**Chloros功能：**

* 将RAW拜耳阵列数据转换为完整RGB图像
* 应用高质量去马赛克算法
* 最大程度保留图像质量与细节

**耗时：**随图像数量及CPU速度变化

### 第三阶段：校准

**Chloros 执行功能：*** **暗角校正**：消除镜头边缘暗化现象
* **反射率校准**：基于目标反射率值进行标准化处理
* 对所有波段/通道实施综合校正
* 根据时间戳为每张图像匹配对应校准目标

**耗时：**占处理时间主体

### 第四阶段：指数计算

**Chloros功能：**

* 计算配置的多光谱指数（NDVI、NDRE等）
* 对校准图像应用波段数学运算
* 为每个选定指数生成指数图像

**耗时：**每张图像数秒

### 第五阶段：导出

**Chloros执行操作：**

* 以选定格式保存校准图像
* 导出配置LUT色彩的指数图像
* 将文件写入相机型号子文件夹
* 保留原始文件名并添加后缀

**耗时：** 随导出格式和文件大小变化***

## 处理行为

### 自动处理流程

启动后整个流程自动运行：

* 无需用户干预
* 所有配置步骤顺序执行
* 实时显示进度更新

### 处理期间的计算机资源占用

**自由模式：**

* 相对较低的CPU占用（单线程）
* 计算机仍可响应其他任务
* 可安全最小化Chloros窗口并在其他应用中操作

**Chloros+并行模式：**

* 高CPU占用（多线程，最多16核）
* 启用GPU加速时：GPU占用率高
* 处理期间计算机响应可能变慢
* 避免启动其他高CPU负载任务

{%提示 style=&quot;warning&quot; %}
**性能提示**：为获得最佳Chloros+性能，请关闭其他应用程序，让Chloros独占系统资源。
{% endhint %}

### 处理过程不可暂停

**重要限制：**

* 处理启动后无法暂停
* 可取消处理，但进度将丢失
* 部分结果不会保存
* 若取消处理，必须从头开始

**规划建议：**对于超大型项目，建议分批处理或使用CLI以获得更佳控制。***

## 处理进度监控

处理运行期间可执行以下操作：

* **查看进度条** - 显示整体完成百分比
* **查看当前阶段** - 检测、分析、校准或导出
* **检查日志选项卡** - 查看详细处理信息与警告
* **预览已完成图像** - 部分导出文件可能在处理过程中显示

有关监控的详细信息，请参阅[处理监控](monitoring-the-processing.md)。

***

## 取消处理

若需终止处理：

### 取消操作步骤

1. 定位**停止/取消按钮**（处理期间替代开始按钮）
2. 点击停止按钮
3. 处理立即中止
4. 部分结果将被丢弃

### 取消时机

**有效取消理由：**

* 发现使用了错误设置
* 忘记标记目标图像
* 导入错误图像
* 系统运行过慢或无响应

**取消后操作：**

* 检查并修复问题
* 根据需要调整设置
* 从头重新启动处理
* 建议完全关闭Chloros并重启以获得最佳体验

{%提示 style=&quot;warning&quot; %}
**无部分结果**：取消操作将丢弃所有进度。 Chloros 不保存部分处理的图像。
{% endhint %}

***

## 处理时间预估

实际处理时间因以下因素存在显著差异：

* 图像数量
* 图像分辨率
* RAW 与 JPG 输入格式
* 处理模式 （免费版 vs Chloros+）
* CPU速度与核心数量
* GPU可用性（仅限Chloros+）
* 需计算的索引数量
* 导出格式复杂度

### 粗略估算（Chloros+，1200万像素图像，现代CPU）

| 图像数量 | 免费模式 | Chloros+ (CPU) | Chloros+ (GPU) |
| ----------- | --------- | -------------- | -------------- |
| 50 张图像   | 15-20 分钟 | 5-8 分钟        | 3-5 分钟        |
| 100 张图像  | 30-40 分钟 | 10-15 分钟      | 5-8 分钟        |
| 200 张图像  | 1-1.5 小时 | 20-30 分钟      | 10-15 分钟      |
| 500 张图片  | 2-3 小时   | 45-60 分钟      | 20-30 分钟      |
| 1000 张图片 | 4-6 小时   | 1.5-2 小时      | 40-60 分钟      |

{%提示 style=&quot;info&quot; %}
**首次运行**：初始处理可能耗时较长，因Chloros需构建缓存和配置文件。后续处理相似数据集将更快。
{% endhint %}

***

## 启动常见问题

### 启动按钮失效（呈灰色）

**可能原因：**

* 未导入图像
* 后端未完全启动
* 先前处理仍在运行
* 项目未完全加载

**解决方案：**

1. 等待后端完全初始化（检查主菜单图标）
2. 在文件浏览器中确认图像已导入
3. 若按钮仍不可用，请重启Chloros
4. 检查调试日志中的错误信息

### 处理启动后立即失败

**可能原因：**

* 项目中无有效图像
* 图像文件损坏
* 磁盘空间不足
* 内存（RAM）不足

**解决方案：**

1. 检查调试日志 <img src="../.gitbook/assets/icon_log.JPG" alt="" data-size="line"> 查找错误信息
2. 确认可用磁盘空间
3. 尝试处理较小图像子集
4. 验证图像是否损坏

### &quot;未检测到目标&quot;警告

**可能原因：**

* 忘记标记目标图像
* 目标图像未包含可见目标
* 目标检测设置过于严格

**解决方案：**

1. 参阅[目标图像选择指南](choosing-target-images.md)
2. 在目标列标记合适图像
3. 确认标记图像中目标可见
4. 必要时调整目标检测设置

***

## 成功处理技巧

### 开始前准备

1. **先用小样本测试** - 处理10-20张图像验证设置
2. **检查可用磁盘空间** - 确保预留2-3倍数据集大小的空间
3. **关闭非必要应用** - 释放系统资源
4. **核查目标图像** - 预览标记目标确保质量
5. **保存项目** - 项目自动保存，但建议手动备份

### 处理过程中

1. **避免系统休眠** - 关闭省电模式
2. **保持Chloros前台运行** - 或至少在任务栏可见
3. **定期检查进度** - 留意警告或错误提示
4. **勿加载其他大型应用** - 尤其在Chloros+并行模式下

### Chloros+ GPU加速

若使用NVIDIA GPU加速：

1. 更新NVIDIA驱动至最新版本
2. 确保GPU配备4GB+显存
3. 关闭GPU密集型应用（游戏、视频编辑）
4. 监控GPU温度（确保散热充足）

***

## 后续步骤

处理启动后：

1. **监控进度** - 参见[处理监控](monitoring-the-processing.md)
2. **等待完成** - 处理过程自动运行
3. **查看结果** - 参见[处理完成指南](finishing-the-processing.md)

处理期间的操作说明，请参阅[处理过程监控](monitoring-the-processing.md)。
